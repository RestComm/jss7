					<h3 style="margin: 0px;"><i class="icon-hdd"></i> Stream Control Transmission Protocol</h3>
					<hr style="margin: 10 0px;"/>
					<button id="apply-server-settings" class="btn btn-small" onclick="applyServerSettings()" style="display:none;"><i class="icon-save" style="color: #000000;"></i>  Apply Changes</button>
					
					<p>
					        <ol id="breadcrumbs">
					       </ol>
					</p>
					
					<p>
						<br/>
					</p> 
					
 					<p>
						<table id="sctp-list-table" class="table table-hover">
							<thead>
								<tr>
									<th style="width: 30px;">&nbsp;</th>
									<th>Name</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table> 					
	 					
	 					<div id="div-ss7-sctp-settings">
						
						</div>	
								 
					</p>	
				<script type="text/javascript">
					
					$(document).ready(function () {
						crumbList = new CrumbList('setMenu(this, \'sctp\')','SCTP management units');
						crumbList.output();
						refreshSctpList();
	    			});
					
					function onSipServrConfigOk(mbeanName, propertyName, spanId){
						var formInvalid = false;
						
						var spanElement = document.getElementById(spanId + "-input");
						var eleChild = spanElement.childNodes;
						var inputTextEle = eleChild[0];
						var spanElementTxt = document.getElementById(spanId + "-text");
						
						var propvalue = inputTextEle.value;
						
						if(propvalue.trim() == "") {
							$("#div-"+spanId + "-input").addClass("error");					    			
							formInvalid = true;
						} else if($("#div-"+spanId + "-input").hasClass("error")) {
							$("#div-"+spanId + "-input").removeClass("error");		
						}	
						
						if(formInvalid) {
							$("#login-settings-error").show();
							logToConsole("ERROR", "Some Fields are not correctly filled out, please double check the settings !");
							return false;
						} else {
							$("#login-settings-error").hide();
						}					
						
						var mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+mbeanName;
						jolokia.request(
								[
									{ type: "write", mbean: mbeanSearch, attribute: propertyName, value: inputTextEle.value },
								],
								{
									success: function(response) {
										
										logToConsole("INFO", "TCAP property "+ propertyName +"  successfully updated.");
										
										spanElementTxt.innerHTML= inputTextEle.value;
									},
									error: function(value) {
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
									} 
								}
							);		
						
						spanElement.style.display = 'none';
						spanElementTxt.style.display = '';
						
						
					}					
					
					function showInternalPageDetails(sctpName,title){
						generateMenu(sctpName,title);
						$("#sctp-list-table").hide();
						$('#div-ss7-sctp-settings').children('span').hide();
						$("#ss7-sctp-settings-"+sctpName).show();
					}
					
					function changeServerState(sctpName,serverName,serverState){
						
						var method = "startServer";
						var msg = "started";
						if(serverState == "true"){
							method = "stopServer";
							msg = "stopped";
						}
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+sctpName;
						jolokia.execute(mbeanSearch,method,serverName,
								{
									success: function(value) {
										refreshSctpList();
										logToConsole('INFO', 'Successfully '+ msg +'  ' + serverName );
									},
									error: function(value){
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
									}
						
								});	
					}
					
					function removeAssociation(sctpName,assocName){
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+sctpName;
						jolokia.execute(mbeanSearch,"removeAssociation",assocName,
								{
									success: function(value) {
										refreshSctpList();
										logToConsole('INFO', 'Successfully removed ' + assocName +' from ' + sctpName);
									},
									error: function(value){
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
									}
								});	
					}
					
					function removeServer(sctpName,serverName){
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+sctpName;
						jolokia.execute(mbeanSearch,"removeServer",serverName,
								{
									success: function(value) {
										refreshSctpList();
										logToConsole('INFO', 'Successfully removed ' + serverName +' from ' + sctpName);
									},
									error: function(value){
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
									}
								});	
					}
					
					
					function addSCTPServer(name){
						var formInvalid = false;
								
						var sctpName = $("#sctpName"+name).val();
						var sctpHostAddress = $("#sctpHostAddress"+name).val();
						var sctpHostPort = $("#sctpHostPort"+name).val();
						
						var e = document.getElementById("sctpIPType"+name);
						var sctpIPType = e.options[e.selectedIndex].text;

						var acceptAnonymous = $("#acceptAnonymous"+name).prop('checked');
						var sctpMaxConcurrentConn = $("#sctpMaxConcurrentConn"+name).val();
						var sctpExtraHostAddress = $("#sctpExtraHostAddress"+name).val();

						var sctpExtraHostAddress = $("#sctpExtraHostAddress"+name).val();
						
						if(sctpMaxConcurrentConn == ""){
							sctpMaxConcurrentConn = "0";
						}
					
					    if($("#sctpName"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpName"+name).parent().parent().addClass("error");
						    $("#sctpName"+name).siblings(".help-inline").show();
						} else {
							$("#sctpName"+name).parent().parent().removeClass("error");
						    $("#sctpName"+name).siblings(".help-inline").hide();
						}
					    
					    if($("#sctpHostAddress"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpHostAddress"+name).parent().parent().addClass("error");
						    $("#sctpHostAddress"+name).siblings(".help-inline").show();
						} else {
							$("#sctpHostAddress"+name).parent().parent().removeClass("error");
						    $("#sctpHostAddress"+name).siblings(".help-inline").hide();
						}
					    
					    
					    if($("#sctpHostPort"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpHostPort"+name).parent().parent().addClass("error");
						    $("#sctpHostPort"+name).siblings(".help-inline").show();
						} else {
						    $("#sctpHostPort"+name).parent().parent().removeClass("error");
						    $("#sctpHostPort"+name).siblings(".help-inline").hide();
						}
						
						if(formInvalid) {
							$("#create-sctpServers-error"+name).show();
							logToConsole("ERROR", "Some Fields are not correctly filled out, please double check!");
							return false;
						} else {
							$("#create-sctpServers-error"+name).hide();
						}
						
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+name;
						jolokia.execute(mbeanSearch,"addSctpServer",sctpName, sctpHostAddress, sctpHostPort, sctpIPType,
								acceptAnonymous, sctpMaxConcurrentConn, sctpExtraHostAddress,
								{
									success: function(value) {
										$('#entities-modal-sctpServers'+name).modal('hide');
										refreshSctpList();
										logToConsole('INFO', 'Successfully added Server '+ sctpName +' for ' + name );
									},
									error: function(value){
										errorUID = ("st" + new Date().getTime()).hashCode();
										createStackTrace(errorUID, value.stacktrace);
										logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
									}
								});	
					}
					
					function addAssoc(name){
						var formInvalid = false;
								
						var sctpAssocName = $("#sctpAssocName"+name).val();
						var sctpAssocPeerAddress = $("#sctpAssocPeerAddress"+name).val();
						var sctpAssocPeerPort = $("#sctpAssocPeerPort"+name).val();
						
						var e = document.getElementById("sctpAssocIPType"+name);
						var sctpAssocIPType = e.options[e.selectedIndex].text;
						
						var sctpAssocIsServer = $("#sctpAssocIsServer"+name).prop('checked');

						e = document.getElementById("sctpAssocServerName"+name);
						
						var sctpAssocServerName;
						
						if(sctpAssocIsServer && e.selectedIndex != -1){
							sctpAssocServerName = e.options[e.selectedIndex].text;
						} 
						
						var sctpAssocHostAddr = $("#sctpAssocHostAddr"+name).val();
						var sctpAssocHostPort = $("#sctpAssocHostPort"+name).val();
						var sctpAssocExtraHostAddress = $("#sctpAssocExtraHostAddress"+name).val();
						
						if(sctpAssocExtraHostAddress == ""){
							sctpAssocExtraHostAddress = null;
						}
						
						if(typeof sctpAssocIPType == "undefined") {
							sctpAssocIPType = "SCTP"
						}
						
					
					    if($("#sctpAssocName"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpAssocName"+name).parent().parent().addClass("error");
						    $("#sctpAssocName"+name).siblings(".help-inline").show();
						} else {
							 $("#sctpAssocName"+name).parent().parent().removeClass("error");
							 $("#sctpAssocName"+name).siblings(".help-inline").hide();
						}
					    
					    if($("#sctpAssocPeerAddress"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpAssocPeerAddress"+name).parent().parent().addClass("error");
						    $("#sctpAssocPeerAddress"+name).siblings(".help-inline").show();
						} else {
						    $("#sctpAssocPeerAddress"+name).parent().parent().removeClass("error");
						    $("#sctpAssocPeerAddress"+name).siblings(".help-inline").hide();
						}
					    
					    if($("#sctpAssocPeerPort"+name).val().length === 0) {
					    	formInvalid = true;
						    $("#sctpAssocPeerPort"+name).parent().parent().addClass("error");
						    $("#sctpAssocPeerPort"+name).siblings(".help-inline").show();
						} else {
						    $("#sctpAssocPeerPort"+name).parent().parent().removeClass("error");
						    $("#sctpAssocPeerPort"+name).siblings(".help-inline").hide();
						}
						
						if (sctpAssocIsServer) {
							
							$("#sctpAssocHostAddr"+name).parent().parent().removeClass("error");
							$("#sctpAssocHostAddr"+name).siblings(".help-inline").hide();
							
							$("#sctpAssocHostPort"+name).parent().parent().removeClass("error");
						    $("#sctpAssocHostPort"+name).siblings(".help-inline").hide();
						    
								
						    if($("#sctpAssocServerName"+name).val() == null) {
						    	formInvalid = true;
							    $("#sctpAssocServerName"+name).parent().parent().addClass("error");
							    $("#sctpAssocServerName"+name).siblings(".help-inline").show();
							}
							
						} else {
							
							$("#sctpAssocServerName"+name).parent().parent().removeClass("error");
						    $("#sctpAssocServerName"+name).siblings(".help-inline").hide();
							
						    if($("#sctpAssocHostAddr"+name).val().length === 0) {
						    	formInvalid = true;
							    $("#sctpAssocHostAddr"+name).parent().parent().addClass("error");
							    $("#sctpAssocHostAddr"+name).siblings(".help-inline").show();
							}
						    
						    if($("#sctpAssocHostPort"+name).val().length === 0) {
						    	formInvalid = true;
							    $("#sctpAssocHostPort"+name).parent().parent().addClass("error");
							    $("#sctpAssocHostPort"+name).siblings(".help-inline").show();
							}

						}
						
						if(formInvalid) {
							$("#create-sctpAssociations-error"+name).show();
							logToConsole("ERROR", "Some Fields are not correctly filled out, please double check!");
							return false;
						} else {
							$("#create-sctpAssociations-error"+name).hide();
						}
						
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name="+name;
						
						if (sctpAssocIsServer) {
							jolokia.execute(mbeanSearch,"addSctpServerAssociation",sctpAssocPeerAddress, sctpAssocPeerPort, sctpAssocServerName,
									sctpAssocName, sctpAssocIPType,
									{
										success: function(value) {
											$('#entities-modal-sctpAssociations'+name).modal('hide');
											refreshSctpList();
											logToConsole('INFO', 'Successfully added Server Association '+ sctpAssocName +' for ' + name );
										},
										error: function(value){
											errorUID = ("st" + new Date().getTime()).hashCode();
											createStackTrace(errorUID, value.stacktrace);
											logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
										}
									});	
						}else{
							jolokia.execute(mbeanSearch,"addSctpAssociation",sctpAssocHostAddr, sctpAssocHostPort, sctpAssocPeerAddress, sctpAssocPeerPort,
									sctpAssocName, sctpAssocIPType, sctpAssocExtraHostAddress,
									{
										success: function(value) {
											$('#entities-modal-sctpAssociations'+name).modal('hide');
											refreshSctpList();
											logToConsole('INFO', 'Successfully added Client Association '+ sctpAssocName +' for ' + name );
										},
										error: function(value){
											errorUID = ("st" + new Date().getTime()).hashCode();
											createStackTrace(errorUID, value.stacktrace);
											logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
										}
									});	
						}
						

					}
					
					function refreshSctpList(){
						mbeanSearch="org.mobicents.ss7:layer=SCTP,type=Management,name=*";
						var mbean;
						$.ajax({
							dataType: "json",
							url: window.jolokiaProtocol + "//" + window.jolokiaAddress + ":" + window.jolokiaPort + "/jolokia/search/" + mbeanSearch
						})
						.done(function(html) {
							if (html.error) {
								logToConsole("ERROR", html.error);
							}
							else {		
								jQuery.each(html.value, function() {
									mbeanVar = this;
									jolokia.request(
											[
											 	{ type: "read", mbean: mbeanVar },
											],
											{ success: [
												function(response) {
													
													
													var name = response.value.Name;
													var started = response.value.Started;
													var connectDelay = response.value.ConnectDelay;
													var persistDir = response.value.PersistDir;

													var congControl_DelayThreshold_1 = response.value.CongControl_DelayThreshold_1;
													var congControl_DelayThreshold_2 = response.value.CongControl_DelayThreshold_2;
													var congControl_DelayThreshold_3 = response.value.CongControl_DelayThreshold_3;
													
													var isSctpStarted = true;
													
													$('#sctp-list-table').children('tbody').append('<tr class="service-row" onclick="showInternalPageDetails(\'' + name + '-super\',\'' + name + '\')"><td style="vertical-align: middle; text-align: center;"><i style="color: ' + (isSctpStarted ? '#51A351' : '#BD362F') + ';" class="' + (isSctpStarted ? 'icon-play-circle' : 'icon-remove-circle') + '"></i></td>'+
															'<td style="cursor: pointer;">' + name + '</td>' +
															'</tr>' );
													
													var sctpServers = response.value.Servers;
													var sctpAssociations = response.value.Associations;
													
													$('#div-ss7-sctp-settings').append('<span id="ss7-sctp-settings-'+name+'-super" style="display:none;">'+
															'	<ul class="nav nav-tabs" id="myTab">'+
															'		<li class="active"><a href="#sctpDetail'+name+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-hdd"></i> Details</a></li>'+
															'		<li><a href="#sctpServers'+name+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-map-marker"></i> Servers</a></li>'+
															'		<li><a href="#sctpAssociations'+name+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-cog"></i> Associations</a></li>'+
															'	</ul>	'+
															''+
															'	<div class="tab-content">'+
															'		<div class="tab-pane active" id="sctpDetail'+name+'">'+	
															'			<table id="sctpDetail-list-table'+name+'" class="table table-hover">'+
															'				<thead>'+
															'					<tr>'+
															'					<th style="width: 30px;">&nbsp;</th>'+
															'					<th>Property</th>'+
															'					<th>Value</th>'+
															'					<th>&nbsp;</th>'+
															'					</tr>'+
															'				</thead>'+
															'				<tbody>'+
															'					<tr data-toggle="tooltip" title="name of this SCTP stack">'+
															'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
															'					<td style="font-size: 0.9em;">Name</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">' + name + '</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">&nbsp;</td>'+
															'					</tr>'+
															
															'					<tr data-toggle="tooltip" title="directory where this stack persists properties. This property cannot be updated while stack is running. Set this value in jboss-beans.xml">'+
															'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
															'					<td style="font-size: 0.9em;">Persist Dir</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">' + persistDir + '</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">&nbsp;</td>'+
															'					</tr>'+
															
															'					<tr data-toggle="tooltip" title="true if SCTP stack is started">'+
															'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
															'					<td style="font-size: 0.9em;">Started</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">' + started + '</td>'+
															'					<td style="font-size: 0.9em; padding: 0;">&nbsp;</td>'+
															'					</tr>'+

																				'<tr data-toggle="tooltip" title="if SCTP Association is client side, SCTP stack will try to initiate socket connect request after every connectdelay milli seconds till connection is successful.">'+
																				'<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
																				'<td style="font-size: 0.9em;">Connect Delay</td>'+
																				'<td style="font-size: 0.9em; padding: 0;">'+
																					'<div id="div-' + name +'connectDelay-input" class="control-group">'+
																					'<span id="' + name +'connectDelay-input" style="display: none;">'+
																						'<input type="text" class="input-small" value="' + connectDelay + '" /> ' +
																						'<i class="icon-ok" style="cursor: pointer;" onclick="onSipServrConfigOk(\'' + name+ '\', \'ConnectDelay\', \'' + name+"connectDelay" + '\')"></i> ' +
																						'<i class="icon-remove" style="cursor: pointer;" onclick="$(\'[id^='+name+"connectDelay"+']\').toggle(); $(\'input[id^='+name+"connectDelay"+']\').focus();"></i>' + 
																					'</span>'+
																					'</div>' +
																					'<span id="' +name + 'connectDelay-text">' + connectDelay + '</span>'+
																				'</td>'+
																				'<td><i class="icon-pencil" data-toggle="tooltip" title="Edit" style="cursor: pointer;" onclick="$(\'[id^='+name+"connectDelay"+']\').toggle(); $(\'input[id^='+name+"connectDelay"+']\').focus();"></i>' +
																				'</td>'+
																			    '</tr>'+																			    
															
																				'<tr data-toggle="tooltip" title="For outgoing messages congestion control stack needs to have 3 thresholds - delays of outgoing messages before it will be sent to IP channel (3 levels - 1, 2, 3). If a delay time in seconds becomes more then value for level 1, 2 or 3, the Association\'s congestion level becomes to 1, 2 or 3. This is Threshold level 1.">'+
																				'<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
																				'<td style="font-size: 0.9em;">Congestion control delay threshold 1</td>'+
																				'<td style="font-size: 0.9em; padding: 0;">'+
																					'<div id="div-' + name +'congControl_DelayThreshold_1-input" class="control-group">'+
																					'<span id="' + name +'congControl_DelayThreshold_1-input" style="display: none;">'+
																						'<input type="text" class="input-small" value="' + congControl_DelayThreshold_1 + '" /> ' +
																						'<i class="icon-ok" style="cursor: pointer;" onclick="onSipServrConfigOk(\'' + name+ '\', \'CongControl_DelayThreshold_1\', \'' + name+"congControl_DelayThreshold_1" + '\')"></i> ' +
																						'<i class="icon-remove" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_1"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_1"+']\').focus();"></i>' + 
																					'</span>'+
																					'</div>' +
																					'<span id="' +name + 'congControl_DelayThreshold_1-text">' + congControl_DelayThreshold_1 + '</span>'+
																				'</td>'+
																				'<td><i class="icon-pencil" data-toggle="tooltip" title="Edit" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_1"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_1"+']\').focus();"></i>' +
																				'</td>'+
																			    '</tr>'+																			    
															
																				'<tr data-toggle="tooltip" title="For outgoing messages congestion control stack needs to have 3 thresholds - delays of outgoing messages before it will be sent to IP channel (3 levels - 1, 2, 3). If a delay time in seconds becomes more then value for level 1, 2 or 3, the Association\'s congestion level becomes to 1, 2 or 3. This is Threshold level 2.">'+
																				'<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
																				'<td style="font-size: 0.9em;">Congestion control delay threshold 2</td>'+
																				'<td style="font-size: 0.9em; padding: 0;">'+
																					'<div id="div-' + name +'congControl_DelayThreshold_2-input" class="control-group">'+
																					'<span id="' + name +'congControl_DelayThreshold_2-input" style="display: none;">'+
																						'<input type="text" class="input-small" value="' + congControl_DelayThreshold_2 + '" /> ' +
																						'<i class="icon-ok" style="cursor: pointer;" onclick="onSipServrConfigOk(\'' + name+ '\', \'CongControl_DelayThreshold_2\', \'' + name+"congControl_DelayThreshold_2" + '\')"></i> ' +
																						'<i class="icon-remove" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_2"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_2"+']\').focus();"></i>' + 
																					'</span>'+
																					'</div>' +
																					'<span id="' +name + 'congControl_DelayThreshold_2-text">' + congControl_DelayThreshold_2 + '</span>'+
																				'</td>'+
																				'<td><i class="icon-pencil" data-toggle="tooltip" title="Edit" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_2"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_2"+']\').focus();"></i>' +
																				'</td>'+
																			    '</tr>'+																			    
															
																				'<tr data-toggle="tooltip" title="For outgoing messages congestion control stack needs to have 3 thresholds - delays of outgoing messages before it will be sent to IP channel (3 levels - 1, 2, 3). If a delay time in seconds becomes more then value for level 1, 2 or 3, the Association\'s congestion level becomes to 1, 2 or 3. This is Threshold level 3.">'+
																				'<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-resize-small"></i></td>'+
																				'<td style="font-size: 0.9em;">Congestion control delay threshold 3</td>'+
																				'<td style="font-size: 0.9em; padding: 0;">'+
																					'<div id="div-' + name +'congControl_DelayThreshold_3-input" class="control-group">'+
																					'<span id="' + name +'congControl_DelayThreshold_3-input" style="display: none;">'+
																						'<input type="text" class="input-small" value="' + congControl_DelayThreshold_3 + '" /> ' +
																						'<i class="icon-ok" style="cursor: pointer;" onclick="onSipServrConfigOk(\'' + name+ '\', \'CongControl_DelayThreshold_3\', \'' + name+"congControl_DelayThreshold_3" + '\')"></i> ' +
																						'<i class="icon-remove" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_3"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_3"+']\').focus();"></i>' + 
																					'</span>'+
																					'</div>' +
																					'<span id="' +name + 'congControl_DelayThreshold_3-text">' + congControl_DelayThreshold_3 + '</span>'+
																				'</td>'+
																				'<td><i class="icon-pencil" data-toggle="tooltip" title="Edit" style="cursor: pointer;" onclick="$(\'[id^='+name+"congControl_DelayThreshold_3"+']\').toggle(); $(\'input[id^='+name+"congControl_DelayThreshold_3"+']\').focus();"></i>' +
																				'</td>'+
																			    '</tr>'+																			    

															'				</tbody>'+
															'			</table>'+ 											
															'		</div>'+
															
															
															'		<div class="tab-pane" id="sctpServers'+name+'">'+
															'			<table id="no-sctpServers-list-table'+name+'" class="table" style="display: none;">'+
															'				<tr>'+
															'					<td>'+
															'						<div class="alert alert-warning fade in text-center" >'+
															'							<h2>No SCTP Server has been defined yet.</h2>'+
															'						</div>'+
															'					</td>'+
															'				</tr>'+
															'			</table>'+	
															'			<table id="sctpServers-list-table'+name+'" class="table table-hover">'+
															'				<thead>'+
															'					<tr>'+
															'					<th style="width: 30px;">&nbsp;</th>'+
															'					<th>Name</th>'+
															'					<th>State</th>'+
															'					<th>Actions</th>'+
															'					<th>Delete</th>'+
															'					</tr>'+
															'				</thead>'+
															'				<tbody>'+
															'				</tbody>'+	
															'			</table>'+ 	
															'			<a href="#entities-modal-sctpServers'+name+'" role="button" class="btn btn-info btn-small" data-toggle="modal" ><i class="icon-external-link"></i> Create Server</a>'+
															'			<div id="entities-modal-sctpServers'+name+'" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">'+
															'				<div class="modal-header">'+
															'					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+
															'					<h3><i class="icon-map-marker" style="color: #CC9522;"></i> Create Server</h3>'+
															'				</div>'+
															'				<div id="entities-modal-body" class="modal-body">'+
															'					<div class="alert alert-error" id="create-sctpServers-error'+name+'" style="display:none;">'+
															'					  <button type="button" class="close">&times;</button>'+
															'					  Some Fields are not correctly filled out, please double check the settings below !'+
															'					</div>'+
															'					<p>'+  
															
															'						<span>'+
															
															'							<div class="control-group">'+
															'  								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="name of the new Server created. This must be unique and takes any String value">'+
															'    								<span class="add-on">Name</span>'+
															'      								<input id="sctpName'+name+'" type="text" class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" placeholder="Name" />'+
															'  								</span>'+
															'							</div>'+
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="host IP address to which the SCTP Server socket will bind to">'+
															'    								<span class="add-on">Host Address</span>'+
															'      								<input id="sctpHostAddress'+name+'" type="text" class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" placeholder="Host Address" />'+
															'  								</span>'+
															'							</div>'+
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="host port to which the underlying SCTP Server socket will bind to">'+
															'    								<span class="add-on">Host port</span>'+
															'      								<input id="sctpHostPort'+name+'" type="text" placeholder="Host Port"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+
															'							</div>'+
															
															'							<div id="actpIPTypeBtnGrp'+name+'" class="control-group" >'+
															'   							<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="socket type">'+
															'       							<span class="add-on">Socket Type</span>'+
															'   								<select id="sctpIPType'+name+'" >'+
															'   									<option>SCTP</option>'+
															'       								<option>TCP</option>'+
															'       							</select>'+
															'   							</span>'+	
															'							</div>'+
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="if this socket accepts socket creation request from anonymous ip:port">'+
															'									<span class="add-on">Accept Anonymous </span>'+
															'									<input id="acceptAnonymous'+name+'" type="checkbox" class="input-mini" style="margin-left:3px; margin-top:0px; margin-right:12px; text-align:center; width:30px; height:30px;"></input>'+
															'  								</span>'+
															'							</div>'+
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="maximum concurrent connection this socket will accept">'+
															'    								<span class="add-on">Max concurrent connections</span>'+
															'									<input id="sctpMaxConcurrentConn'+name+'" type="text" placeholder="0" class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;"></input>'+
															'  								</span>'+
															'							</div>'+
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="For SCTP multi-home support, you can pass multiple IP addresses as comma separated values. The Server socket will bind to the primary IP address and when it becomes unavailable, it will automatically fall back to secondary address. If the socket-type is TCP, these comma separated values will be ignored and the Server socket will always bind to the primary IP address (Host Address)">'+
															'    								<span class="add-on">Extra Host Address</span>'+															
															'									<input id="sctpExtraHostAddress'+name+'" type="text" class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" placeholder="Extra Host Address"></input></br>'+
															'  								</span>'+
															'							</div>'+															
											
															'							<button id="add-rsp-btn'+name+'" onclick="addSCTPServer(\'' + name + '\');" class="btn btn btn-primary" >Create</button> '+
															'						</span>'+					
															'					</p>'+
															'				</div>'+					
															'				<div class="modal-footer">'+
															'					<a href="#" onclick="$(\'#entities-modal-sctpServers'+name+'\').modal(\'hide\'); return false;" class="btn">Close</a>'+
														    '				</div>'+
															'			</div>'+
															'		</div>'+
															
															'		<div class="tab-pane" id="sctpAssociations'+name+'">'+
															'			<table id="no-sctpAssociations-list-table'+name+'" class="table" style="display: none;">'+
															'				<tr>'+
															'					<td>'+
															'						<div class="alert alert-warning fade in text-center" >'+
															'							<h2>No SCTP Association has been defined yet.</h2>'+
															'						</div>'+
															'					</td>'+
															'				</tr>'+
															'			</table>'+	
															'			<table id="sctpAssociations-list-table'+name+'" class="table table-hover">'+
															'				<thead>'+
															'					<tr>'+
															'					<th style="width: 30px;">&nbsp;</th>'+
															'					<th>Name</th>'+
															'					<th>State</th>'+
															'					<th>Delete</th>'+
															'					</tr>'+
															'				</thead>'+
															'				<tbody>'+
															'				</tbody>'+	
															'			</table>'+ 	
															'			<a href="#entities-modal-sctpAssociations'+name+'" role="button" class="btn btn-info btn-small" data-toggle="modal" ><i class="icon-external-link"></i> Create Association</a>'+
															'			<div id="entities-modal-sctpAssociations'+name+'" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">'+
															'				<div class="modal-header">'+
															'					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+
															'					<h3><i class="icon-cog" style="color: #CC9522;"></i> Create Association</h3>'+
															'				</div>'+
															'				<div id="entities-modal-body" class="modal-body">'+
															'					<div class="alert alert-error" id="create-sctpAssociations-error'+name+'" style="display:none;">'+
															'					  <button type="button" class="close">&times;</button>'+
															'					  Some Fields are not correctly filled out, please double check the settings below !'+
															'					</div>'+
															'					<p>'+  
															
															'						<span>'+
															'							<div class="control-group">'+
															'  								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="name of the new Association created. This must be unique and takes any String value">'+
															'    								<span class="add-on">Name</span>'+
															'      								<input id="sctpAssocName'+name+'" type="text" class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" placeholder="Name" />'+
															'  								</span>'+															
															'							</div>'+
																		
															'							<div class="control-group">'+
															'  								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="in a client side association, the server IP address to which the client is connecting to. In a server side association, the client IP address from which connections will be accepted">'+
															'    								<span class="add-on">Peer Address</span>'+
															'      								<input id="sctpAssocPeerAddress'+name+'" type="text" placeholder="Peer Address"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+																
															'							</div>'+
												
															'							<div class="control-group">'+
															'  								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="in a client side association, the server Port to which the client is connecting to. In a server side association, the client port from which connections will be accepted">'+
															'    								<span class="add-on">Peer Port</span>'+
															'      								<input id="sctpAssocPeerPort'+name+'" type="text" placeholder="Peer Port"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+
															'							</div>'+
															
															'							<div id="sctpAssocIPTypeBtnGrp'+name+'" class="control-group" >'+
															'   							<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="socket type">'+
															'       							<span class="add-on">Socket Type</span>'+
															'   								<select id="sctpAssocIPType'+name+'" >'+
															'   									<option>SCTP</option>'+
															'       								<option>TCP</option>'+
															'       							</select>'+
															'   							</span>'+	
															'							</div>'+															
															
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="if this association is client side or server side. If it is client side, it will initiate the connection to peer. If it is server side, it will wait for peer to initiate the connection. The connection request will be accepted from Peer Address: Peer Port">'+
															'									<span class="add-on">Is Server Association </span>'+
															'									<input id="sctpAssocIsServer'+name+'" type="checkbox" class="input-mini" style="margin-left:3px; margin-top:0px; margin-right:12px; text-align:center; width:30px; height:30px;"></input></br>'+
															'  								</span>'+
															'							</div>'+
															
															'							<div class="control-group" >'+
															'   							<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="in a server-side association, the server-name must be passed to associate with the Server identified by that name. You must ensure that the Server identified by server-name has already been created">'+
															'       							<span class="add-on">SCTP Server Name</span>'+
															'   								<select id="sctpAssocServerName'+name+'" >'+
															'       							</select>'+
															'   							</span>'+	
															'							</div>'+
												
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="in a client side association, the local IP address to which the socket will bind to. For a server side association, even if you specify these values it will be ignored.">'+
															'									<span class="add-on">Host Address </span>'+
															'									<input id="sctpAssocHostAddr'+name+'" type="text" placeholder="Host Address"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+															
															'							</div>'+
														
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="in a client side association, the local port to which the socket will bind to. This is required only for a client side Association. For a server side association, even if you specify these values it will be ignored.">'+
															'									<span class="add-on">Host Port </span>'+
															'									<input id="sctpAssocHostPort'+name+'" type="text" placeholder="Host Port"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+	
															'							</div>'+
														
															'							<div class="control-group">'+
															' 								<span class="input-prepend" data-toggle="tooltip" data-placement="bottom" title="For SCTP multi-home support, you can pass multiple IP addresses as comma separated values. The Association will bind to the primary IP address and when it becomes unavailable, it will automatically fall back to secondary address. If the socket-type is TCP, these comma separated values will be ignored and the Assocation will always bind to the primary IP address (the first value in the comma separated list). This is required only for a client side Association. For a server side association, even if you specify these values it will be ignored.">'+
															'									<span class="add-on">Extra Host Address </span>'+
															'									<input id="sctpAssocExtraHostAddress'+name+'" type="text" placeholder="Extra Host Address"  class="input-mini" style="width: 120px; margin-right: 12px; text-align: center;" />'+
															'  								</span>'+	
															'							</div>'+
															
															'							<button id="add-rsp-btn'+name+'" onclick="addAssoc(\'' + name + '\');" class="btn btn btn-primary" >Create</button> '+
															'						</span>'+					
															'					</p>'+
															'				</div>'+					
															'				<div class="modal-footer">'+
															'					<a href="#" onclick="$(\'#entities-modal-sctpAssociations'+name+'\').modal(\'hide\'); return false;" class="btn">Close</a>'+
														    '				</div>'+
															'			</div>'+
															'		</div>'+
															
															
															'	</div>	'+
															'</span>');
													
													$('.sctpServers-row'+name).remove();
													$('.sctpServerNameOption'+name).remove();
													var noOfSctpServers = 0;
													
													jQuery.each(sctpServers, function() {
														var sctpServerTmp = this;
														var sctpServerName = sctpServerTmp.name;
														var sctpServerStarted = sctpServerTmp.started;
														noOfSctpServers = noOfSctpServers + 1 ;   
														
														$('#sctpAssocServerName'+name).append('<option class="sctpServerNameOption'+name+'">'+sctpServerName+'</option>');
									
														$('#sctpServers-list-table'+name).children('tbody').append('<tr class="sctpServers-row'+name+'">'+
																'<td style="vertical-align: middle; text-align: center;"><i style="color: ' + (sctpServerStarted ? '#229522' : '#CC9522') + ';" class="icon-map-marker"></i></td>'+
																'<td><a href="#" onclick="showInternalPageDetails(\''+name+'-server-'+sctpServerName+'\',\''+sctpServerName+'\')">' + sctpServerName + '</a></td>' + 
																'<td>' + (sctpServerStarted ? 'STARTED' : 'STOPPED') + '</td>' + 
																'<td style="font-size: 16px; vertical-align: middle; text-align: center; width: 100px;">' + 
																'<button class="btn btn-small btn-' + (sctpServerStarted ? 'success' : 'warning') + '" data-toggle="tooltip" title="Start/stop Server" data-placement="bottom" onclick="changeServerState(\'' + name +  '\',\'' + sctpServerName +  '\',\'' + sctpServerStarted +  '\')">' + (sctpServerStarted ? 'Stop' : 'Start') + '</i></button> ' +
															    '</td>' +
																'<td style="font-size: 16px; vertical-align: middle; text-align: center; width: 100px;">' + 
																'<button class="btn btn-small btn-danger"' + (sctpServerStarted ? 'disabled' : '') + ' data-toggle="tooltip" title="Remove Server" data-placement="bottom" onclick="' + (sctpServerStarted ? '#' : 'removeServer(\'' + name +  '\',\'' + sctpServerName +  '\')') + '"><i class="icon-remove"> </i></button> ' +
															    '</td></tr>' 
														);
														
														
														//start SCTP Server DISPLAY segment
														sctpMbeanSearch="org.mobicents.ss7:layer=SCTP,type=Server,name="+sctpServerName;
														var mbeanSctpServer;
														$.ajax({
															dataType: "json",
															url: window.jolokiaProtocol + "//" + window.jolokiaAddress + ":" + window.jolokiaPort + "/jolokia/search/" + sctpMbeanSearch
														})
														.done(function(html) {
															if (html.error) {
																logToConsole("ERROR", html.error);
															}
															else {
																//For each SCTP servers
																jQuery.each(html.value, function() {
																	mbeanSctpServer = this;
																	
																	
																	jolokia.request(
																			[
																			 	{ type: "read", mbean: mbeanSctpServer },
																			],
																			{ success: [
																						function(response) {
												
																							var sctpServername = response.value.Name;
																							var started = response.value.Started;
																							var hostAddress = response.value.HostAddress;
																							var hostport = response.value.Hostport;
																							var ipChannelType = response.value.IpChannelType;
																							var acceptAnonymousConnections = response.value.AcceptAnonymousConnections;
																							var maxConcurrentConnectionsCount = response.value.MaxConcurrentConnectionsCount;
																							var extraHostAddresses = response.value.ExtraHostAddresses;
																							var sctpServerAssociations = response.value.Associations;
																							
																							$('#div-ss7-sctp-settings').append('<span id="ss7-sctp-settings-'+name+'-server-'+sctpServername+'" style="display:none";>'+
																									'	<ul class="nav nav-tabs" id="myTab">'+
																									'		<li class="active"><a href="#serverDetail'+name+'-'+sctpServername+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-signin"></i> Details</a></li>'+
																									'		<li><a href="#serverDetailsctpAssociations'+name+'-'+sctpServername+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-cog"></i> Associations</a></li>'+
																									'	</ul>	'+
																									''+
																									'	<div class="tab-content">'+
																									'		<div class="tab-pane active" id="serverDetail'+name+'-'+sctpServername+'">'+
																									'			<table id="serverDetail-list-table'+name+'-'+sctpServername+'" class="table table-hover">'+
																									'				<thead>'+
																									'					<tr>'+
																									'					<th style="width: 30px;">&nbsp;</th>'+
																									'					<th>Property</th>'+
																									'					<th>Value</th>'+
																									'					</tr>'+
																									'				</thead>'+
																									'				<tbody>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Name</td>'+
																									'					<td>' + sctpServername + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Started</td>'+
																									'					<td>' + started + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Host Address</td>'+
																									'					<td>' + hostAddress + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Host Port</td>'+
																									'					<td>' + hostport + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>IP Type</td>'+
																									'					<td>' + ipChannelType + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Accept Anonymous</td>'+
																									'					<td>' + acceptAnonymousConnections + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Max concurrent connections</td>'+
																									'					<td>' + maxConcurrentConnectionsCount + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Extra Host Address</td>'+
																									'					<td>' + extraHostAddresses + '</td>'+
																									'					</tr>'+
																									'				</tbody>'+
																									'			</table>'+ 											
																									'		</div>'+
																									
																									'		<div class="tab-pane" id="serverDetailsctpAssociations'+name+'-'+sctpServername+'">'+
																									'			<table id="no-sctpAssociations-server-list-table'+name+'-'+sctpServername+'" class="table" style="display: none;">'+
																									'				<tr>'+
																									'					<td>'+
																									'						<div class="alert alert-warning fade in text-center" >'+
																									'							<h2>No SCTP Association has been defined for Server - '+sctpServername+'.</h2>'+
																									'						</div>'+
																									'					</td>'+
																									'				</tr>'+
																									'			</table>'+	
																									'			<table id="sctpAssociations-server-list-table'+name+'-'+sctpServername+'" class="table table-hover">'+
																									'				<thead>'+
																									'					<tr>'+
																									'					<th style="width: 30px;">&nbsp;</th>'+
																									'					<th>Name</th>'+
																									'					<th>State</th>'+
																									'					<th>Delete</th>'+
																									'					</tr>'+
																									'				</thead>'+
																									'				<tbody>'+
																									'				</tbody>'+	
																									'			</table>'+ 
																									'		</div>'+
																									
																									
																									'	</div>	'+
																									'</span>');
																							
																							
																								$('.sctpAssociations-server-row'+name+'-'+sctpServername).remove();
																								var noOfSctpServersForAssociatoin = 0;
																								jQuery.each(sctpServerAssociations, function() {
																									var sctpAssociationsTmp = this;
																									
																									noOfSctpServersForAssociatoin = noOfSctpServersForAssociatoin + 1;
																									
																									jQuery.each(sctpAssociations, function() {
																										var sctpServerAssociationsTmp = this;
																										var assocName = sctpServerAssociationsTmp.name;
																										var assocState = sctpServerAssociationsTmp.started;
																										
																										if(sctpAssociationsTmp == assocName){
																											$('#sctpAssociations-server-list-table'+name+'-'+sctpServername).children('tbody').append('<tr class="sctpAssociations-server-row'+name+'-'+sctpServername+'"><td style="vertical-align: middle; text-align: center;"><i style="color: #CC9522;" class="icon-map-marker"></i></td>'+
																													'<td><a href="#" onclick="showInternalPageDetails(\''+name+'-assoc-'+assocName+'\',\''+assocName+'\')">' + assocName + '</td>' + 
																													'<td>' + assocState + '</td>' + 
																													'<td style="font-size: 16px; vertical-align: middle; text-align: center; width: 100px;">' + 
																													'<button class="btn btn-small btn-danger" data-toggle="tooltip" title="Remove Association" data-placement="bottom" onclick="removeAssociation(\'' + name +  '\',\'' + assocName +  '\')"><i class="icon-remove"> </i></button> ' +
																												    '</td></tr>' 
																											);	
																										}

																									});	
																								});	
																								
																								if(noOfSctpServersForAssociatoin == 0){
																									$('#no-sctpAssociations-server-list-table'+name+'-'+sctpServername).show();
																									$('#sctpAssociations-server-list-table'+name+'-'+sctpServername).hide();
																								}else {
																									$('#no-sctpAssociations-server-list-table'+name+'-'+sctpServername).hide();
																									$('#sctpAssociations-server-list-table'+name+'-'+sctpServername).show();
																								}																								
																							
																							
																						}],
																						error: function(value){
																							errorUID = ("st" + new Date().getTime()).hashCode();
																							createStackTrace(errorUID, value.stacktrace);
																							logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
																						}
																				}
																			);																	
																});//end For each SCTP servers
															}
														})
														.fail(function() {
															logToConsole("ERROR", "Failure trying to communicate with the jSS7. Please try again later.");
														})
														//end SCTP Server DISPLAY segment
														
														
														
													});	
													
													if(noOfSctpServers == 0){
														$('#no-sctpServers-list-table'+name).show();
														$('#sctpServers-list-table'+name).hide();
													}else {
														$('#no-sctpServers-list-table'+name).hide();
														$('#sctpServers-list-table'+name).show();
													}	
													
													
													$('.sctpAssociations-row'+name).remove();
													var noOfAssociatoin = 0;
													jQuery.each(sctpAssociations, function() {
														var sctpAssociationsTmp = this;
														var assocName = sctpAssociationsTmp.name;
														var assocState = sctpAssociationsTmp.started;
														
														noOfAssociatoin = noOfAssociatoin + 1;
														
														$('#sctpAssociations-list-table'+name).children('tbody').append('<tr class="sctpAssociations-row'+name+'"><td style="vertical-align: middle; text-align: center;"><i style="color: #CC9522;" class="icon-map-marker"></i></td>'+
																'<td><a href="#" onclick="showInternalPageDetails(\''+name+'-assoc-'+assocName+'\',\''+assocName+'\')">' + assocName + '</a></td>' + 
																'<td>' + (assocState ? 'STARTED' : 'STOPPED') + '</td>' + 
																'<td style="font-size: 16px; vertical-align: middle; text-align: center; width: 100px;">' + 
																'<button class="btn btn-small btn-danger"'+ (assocState ? 'disabled' : '') +' data-toggle="tooltip" title="Remove Association" data-placement="bottom" onclick="removeAssociation(\'' + name +  '\',\'' + assocName +  '\')"><i class="icon-remove"> </i></button> ' +
															    '</td></tr>' 
														);
														
														
														//start SCTP Association DISPLAY segment
														sctpAssocMbeanSearch="org.mobicents.ss7:layer=SCTP,type=Association,name="+assocName;
														var mbeanSctpServer;
														$.ajax({
															dataType: "json",
															url: window.jolokiaProtocol + "//" + window.jolokiaAddress + ":" + window.jolokiaPort + "/jolokia/search/" + sctpAssocMbeanSearch
														})
														.done(function(html) {
															if (html.error) {
																logToConsole("ERROR", html.error);
															}
															else {		
																jQuery.each(html.value, function() {
																	mbeanSctpAssoc = this;
																	
																	jolokia.request(
																			[
																			 	{ type: "read", mbean: mbeanSctpAssoc },
																			],
																			{ success: [
																						function(response) {
																							
																							var sctpAssocName = response.value.Name;
																							var sctpAssocstarted = response.value.Started;
																							
																							var sctpAssocup = response.value.Up;
																							var sctpAssocconnected = response.value.Connected;
																							var sctpIpChannelType = response.value.IpChannelType;
																							var sctpAssociationType = response.value.AssociationType;
																							var sctpHostAddress = response.value.HostAddress;
																							var sctpHostPort = response.value.HostPort;
																							var sctpPeerAddress = response.value.PeerAddress;
																							var sctpPeerPort = response.value.PeerPort;
																							var sctpServerName = response.value.ServerName;
																							var sctpExtraHostAddresses = response.value.ExtraHostAddresses;
																						
																							
																							$('#div-ss7-sctp-settings').append('<span id="ss7-sctp-settings-'+name+'-assoc-'+sctpAssocName+'" style="display:none";>'+
																									'	<ul class="nav nav-tabs" id="myTab">'+
																									'		<li class="active"><a href="#sctpAssocDetail'+name+'-'+sctpAssocName+'" data-toggle="tab"><i style="color: #CC9522;" class="icon-signin"></i> Details</a></li>'+
																									'	</ul>	'+
																									''+
																									'	<div class="tab-content">'+
																									'		<div class="tab-pane active" id="sctpAssocDetail'+name+'-'+sctpAssocName+'">'+
																									'			<table id="sctpAssocDetail-list-table'+name+'-'+sctpAssocName+'" class="table table-hover">'+
																									'				<thead>'+
																									'					<tr>'+
																									'					<th style="width: 30px;">&nbsp;</th>'+
																									'					<th>Property</th>'+
																									'					<th>Value</th>'+
																									'					</tr>'+
																									'				</thead>'+
																									'				<tbody>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Name</td>'+
																									'					<td>' + sctpAssocName + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Started</td>'+
																									'					<td>' + started + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Up</td>'+
																									'					<td>' + sctpAssocup + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Connected</td>'+
																									'					<td>' + sctpAssocconnected + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>IP Type</td>'+
																									'					<td>' + sctpIpChannelType + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Association Type</td>'+
																									'					<td>' + sctpAssociationType + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Host Address</td>'+
																									'					<td>' +  ((typeof sctpHostAddress == "undefined" || sctpHostAddress == null )? "": sctpHostAddress)   + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Host Port</td>'+
																									'					<td>' + sctpHostPort + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Peer Address</td>'+
																									'					<td>' + sctpPeerAddress + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Peer Port</td>'+
																									'					<td>' + sctpPeerPort + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Server Name</td>'+
																									'					<td>' +  ((typeof sctpServerName == "undefined" || sctpServerName == null )? "": sctpServerName)  + '</td>'+
																									'					</tr>'+
																									'					<tr class="component-row">'+
																									'					<td style="vertical-align: middle; text-align: center;">&nbsp;<i style="color: #CC9522;" class="icon-signin"></i></td>'+
																									'					<td>Extra Host Address</td>'+
																									'					<td>' +  ((typeof sctpExtraHostAddresses == "undefined" || sctpExtraHostAddresses == null )? "": sctpExtraHostAddresses)  + '</td>'+
																									'					</tr>'+
																									'				</tbody>'+
																									'			</table>'+ 											
																									'		</div>'+
																									
																									'	</div>	'+
																									'</span>');																							
																						}],
																						error: function(value){
																							errorUID = ("st" + new Date().getTime()).hashCode();
																							createStackTrace(errorUID, value.stacktrace);
																							logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
																						}
																				}
																			);
																	

																	
																});
															}
														})
														.fail(function() {
															logToConsole("ERROR", "Failure trying to communicate with the jSS7. Please try again later.");
														})
														//end SCTP Association DISPLAY segment
														
														
													});	
													
													if(noOfAssociatoin == 0){
														$('#no-sctpAssociations-list-table'+name).show();
														$('#sctpAssociations-list-table'+name).hide();
													}else {
														$('#no-sctpAssociations-list-table'+name).hide();
														$('#sctpAssociations-list-table'+name).show();
													}													
													
												
												}],
												error: function(value){
													errorUID = ("st" + new Date().getTime()).hashCode();
													createStackTrace(errorUID, value.stacktrace);
													logToConsole("ERROR", value.error + ". (<a href=\"#" + errorUID + "-modal\" data-toggle=\"modal\">Full Stack Trace</a>)");
												}
											}
									);
									
								});
							}
						})
						.fail(function() {
							logToConsole("ERROR", "Failure trying to communicate with the jSS7. Please try again later.");
						})
											
					}
					</script>

